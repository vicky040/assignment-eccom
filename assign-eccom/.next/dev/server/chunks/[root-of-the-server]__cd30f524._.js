module.exports = [
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}),
"[project]/src/lib/placeholder-images.json (json)", ((__turbopack_context__) => {

__turbopack_context__.v({"placeholderImages":[{"id":"product1","description":"A futuristic mug on a desk.","imageUrl":"https://images.unsplash.com/photo-1590187487917-1dd90b585d64?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwxfHxmdXR1cmlzdGljJTIwbXVnfGVufDB8fHx8MTc2NDMwNjY0MXww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"futuristic mug"},{"id":"product2","description":"A stylish t-shirt with a clock design.","imageUrl":"https://images.unsplash.com/photo-1764014353262-ff9a7cbee974?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw1fHxtb2Rlcm4lMjB0LXNoaXJ0fGVufDB8fHx8MTc2NDMwNjY0Mnww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"modern t-shirt"},{"id":"product3","description":"A pair of glowing socks.","imageUrl":"https://images.unsplash.com/photo-1734523510021-6a1044b5adfd?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwyfHxnbG93aW5nJTIwc29ja3N8ZW58MHx8fHwxNzY0MzA2NjQxfDA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"glowing socks"},{"id":"product4","description":"A sleek pen floating in the air.","imageUrl":"https://images.unsplash.com/photo-1650039744736-fed9d92b994a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw5fHxmbG9hdGluZyUyMHBlbnxlbnwwfHx8fDE3NjQzMDY2NDF8MA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"floating pen"},{"id":"product5","description":"A comfortable hoodie with a space design.","imageUrl":"https://images.unsplash.com/photo-1672906674995-84a7a37648c5?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw2fHxzcGFjZSUyMGhvb2RpZXxlbnwwfHx8fDE3NjQzMDY2NDJ8MA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"space hoodie"},{"id":"product6","description":"A modern smartwatch displaying data.","imageUrl":"https://images.unsplash.com/photo-1662220727289-27d6b2f10a82?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw5fHxzbWFydHdhdGNoJTIwaW50ZXJmYWNlfGVufDB8fHx8MTc2NDMwNjY0MXww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"smartwatch interface"}]});}),
"[project]/src/lib/placeholder-images.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "PlaceHolderImages",
    ()=>PlaceHolderImages
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$placeholder$2d$images$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/src/lib/placeholder-images.json (json)");
;
const PlaceHolderImages = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$placeholder$2d$images$2e$json__$28$json$29$__["default"].placeholderImages;
}),
"[externals]/node:crypto [external] (node:crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:crypto", () => require("node:crypto"));

module.exports = mod;
}),
"[project]/src/lib/store.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "store",
    ()=>store
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$placeholder$2d$images$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/placeholder-images.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$uuid$2f$dist$2d$node$2f$v4$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__default__as__v4$3e$__ = __turbopack_context__.i("[project]/node_modules/uuid/dist-node/v4.js [app-route] (ecmascript) <export default as v4>");
;
;
const NTH_ORDER = 2; // Generate discount every 2nd order
// In-memory data stores
let products = [];
let cart = new Map();
let appliedDiscountCode = null;
let orders = [];
let discountCodes = [
    {
        code: 'SAVE15',
        percentage: 15,
        isUsed: false
    }
];
// Initialize products
if (products.length === 0) {
    products = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$placeholder$2d$images$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PlaceHolderImages"].map((img, index)=>{
        const productNames = [
            "Quantum-Charged Mug",
            "Chrono-Shifting T-Shirt",
            "Aether-Infused Socks",
            "Zero-Gravity Pen",
            "Hyperspace Hoodie",
            "Singularity Smartwatch"
        ];
        const productDescriptions = [
            "A mug that keeps your coffee at the perfect temperature using quantum entanglement.",
            "This t-shirt subtly shifts its design based on the temporal flux. Never wear the same shirt twice.",
            "Infused with aether, these socks provide unparalleled comfort and a slight, pleasant hum.",
            "A pen that floats slightly above the desk, for when you need a little space to think.",
            "A comfortable hoodie that gives you the feeling of gazing into the vastness of space.",
            "A modern smartwatch that displays complex data with a touch of elegance and cosmic wonder."
        ];
        const prices = [
            42.00,
            55.00,
            25.00,
            30.00,
            95.00,
            250.00
        ];
        return {
            id: `prod_${index + 1}`,
            name: productNames[index],
            description: productDescriptions[index],
            price: prices[index],
            imageUrl: img.imageUrl,
            imageHint: img.imageHint
        };
    });
}
function getCartState() {
    const items = Array.from(cart.values());
    const subtotal = items.reduce((acc, item)=>acc + item.price * item.quantity, 0);
    let discountAmount = 0;
    if (appliedDiscountCode) {
        discountAmount = subtotal * (appliedDiscountCode.percentage / 100);
    }
    const total = subtotal - discountAmount;
    return {
        items,
        subtotal,
        discountAmount,
        total,
        appliedDiscountCode: appliedDiscountCode?.code || null
    };
}
class CouponCartStore {
    getProducts() {
        return products;
    }
    getCart() {
        return getCartState();
    }
    addToCart(productId, quantity) {
        const product = products.find((p)=>p.id === productId);
        if (!product) {
            throw new Error('Product not found');
        }
        if (cart.has(productId)) {
            const existingItem = cart.get(productId);
            existingItem.quantity += quantity;
        } else {
            const newCartItem = {
                id: product.id,
                name: product.name,
                description: product.description,
                price: product.price,
                imageUrl: product.imageUrl,
                imageHint: product.imageHint,
                quantity: quantity
            };
            cart.set(productId, newCartItem);
        }
        return getCartState();
    }
    removeFromCart(productId) {
        const item = cart.get(productId);
        if (item) {
            if (item.quantity > 1) {
                item.quantity -= 1;
            } else {
                cart.delete(productId);
            }
        } else {
            throw new Error('Item not in cart');
        }
        return getCartState();
    }
    clearCart() {
        cart.clear();
        appliedDiscountCode = null;
        return getCartState();
    }
    applyDiscount(code) {
        const discount = discountCodes.find((d)=>d.code.toLowerCase() === code.toLowerCase() && !d.isUsed);
        if (!discount) {
            throw new Error('Invalid or used discount code.');
        }
        appliedDiscountCode = discount;
        return getCartState();
    }
    removeDiscount() {
        appliedDiscountCode = null;
        return getCartState();
    }
    createOrder(customerDetails) {
        const cartState = getCartState();
        if (cartState.items.length === 0) {
            throw new Error('Cannot create an order with an empty cart.');
        }
        const order = {
            id: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$uuid$2f$dist$2d$node$2f$v4$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__default__as__v4$3e$__["v4"])(),
            items: cartState.items,
            subtotal: cartState.subtotal,
            discountAmount: cartState.discountAmount,
            total: cartState.total,
            appliedDiscountCode: cartState.appliedDiscountCode,
            createdAt: new Date(),
            customerDetails: customerDetails
        };
        orders.push(order);
        if (appliedDiscountCode) {
            const codeIndex = discountCodes.findIndex((d)=>d.code === appliedDiscountCode.code);
            if (codeIndex !== -1) {
                discountCodes[codeIndex].isUsed = true;
            }
        }
        let newDiscount;
        // The responsibility for clearing the cart is now moved to the client-side provider
        // this.clearCart() is removed from here.
        if (orders.length % NTH_ORDER === 0) {
            newDiscount = this.generateNthOrderDiscount(true);
        }
        return {
            order,
            newDiscount
        };
    }
    generateNthOrderDiscount(force = false) {
        if (!force && (orders.length === 0 || orders.length % NTH_ORDER !== 0)) {
            return null;
        }
        const newDiscount = {
            code: `SAVE10-${(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$uuid$2f$dist$2d$node$2f$v4$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__default__as__v4$3e$__["v4"])().substring(0, 8).toUpperCase()}`,
            percentage: 10,
            isUsed: false
        };
        discountCodes.push(newDiscount);
        return newDiscount;
    }
    getOrders() {
        return [
            ...orders
        ].reverse();
    }
    getOrderById(orderId) {
        return orders.find((o)=>o.id === orderId) || null;
    }
    getAdminStats() {
        const totalAmount = orders.reduce((sum, order)=>sum + order.total, 0);
        const itemCount = orders.reduce((sum, order)=>sum + order.items.reduce((itemSum, item)=>itemSum + item.quantity, 0), 0);
        const totalDiscountAmount = orders.reduce((sum, order)=>sum + order.discountAmount, 0);
        return {
            itemCount,
            totalAmount,
            discountCodes: [
                ...discountCodes
            ].reverse(),
            totalDiscountAmount
        };
    }
}
const store = new CouponCartStore();
}),
"[project]/src/app/api/admin/analytics/route.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "GET",
    ()=>GET
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$store$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/store.ts [app-route] (ecmascript)");
;
;
async function GET() {
    try {
        const stats = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$store$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["store"].getAdminStats();
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json(stats);
    } catch (error) {
        console.error('Error fetching admin stats:', error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            message: 'Internal Server Error'
        }, {
            status: 500
        });
    }
}
}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__cd30f524._.js.map